"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2895],{26056:function(t,e,a){a.d(e,{_:function(){return P}});var o=a(83872),r=a(93465),n=a(26412),i=a.n(n);let s=function(t,e){let a=t.getBalance.bind(t);return t.getBalance=i()(a,{isPromise:!0,maxAge:e.maxAge,isDeepEqual:!0,maxSize:e.maxSize}),t}(new r.P2(o.I),{maxAge:1e3,maxSize:1e6}),l={supports:t=>"solana-testnet"===t.chainKey||"solana"===t.chainKey,getBalance:async(t,e)=>(await d()).getBalance(t,e)},d=i()(async()=>{let[{getPublicConnection:t},{BalanceProvider__solana:e}]=await Promise.all([a.e(9739).then(a.bind(a,29739)),Promise.all([a.e(5608),a.e(510),a.e(6946)]).then(a.bind(a,86946))]);return new e(t)}),u={supports:t=>"tron"===t.chainKey||"tron-testnet"===t.chainKey,getBalance:async(t,e)=>{let{toHexAddress:o}=await a.e(7490).then(a.bind(a,37490)),r=e.startsWith("0x")?e:o(e);return s.getBalance(t,r)}};var c=a(59533);class p{getBalance(t,e){let a=m(t,e);return this.balances.get(a)}constructor(){this.balances=new c.vP,this.providers=[s,l,u],this.updateBalance=(0,c.ls)(function*(t,e){let a=m(t,e);for(let o of this.providers)if(o.supports(t)){let r=yield o.getBalance(t,e),n=this.balances.get(a);if(null==n?void 0:n.equalTo(r))return n;return this.balances.set(a,r),r}throw Error("No provider for ".concat(t.symbol," on ").concat(t.chainKey))}),(0,c.ky)(this,{providers:!1},{autoBind:!0})}}let v=t=>{var e;return[t.chainKey,t.symbol,null!==(e=t.address)&&void 0!==e?e:"0xNATIVE"].join(":")},m=(t,e)=>v(t)+":"+e,P=new p},31348:function(t,e,a){a.d(e,{m:function(){return r}});var o=a(46860);function r(t,e){return(t?n(t):0)-(e?n(e):0)}function n(t){var e;let a=o.WI.getFiatAmount(t,o.Yw.USD);return null!==(e=null==a?void 0:a.value)&&void 0!==e?e:0}},62895:function(t,e,a){a.d(e,{earnStore:function(){return b}});var o=a(8590),r=a(59533),n=a(26056),i=a(64719),s=a(31348);let l=new o.gG(1,100).multiply(100001),d=t=>{if(null!=t){if("Infinity"===t)return l;try{let e=(0,o.vz)(t,18),a=BigInt(1e18);return new o.gG(e,a)}catch(t){console.error("Failed to parse percent from API",t);return}}};var u=a(77248);async function c(){let{data:t}=await u.G.overview.farm.all({});return(null==t?void 0:t.map(t=>({id:t.id,chainKey:t.chainKey,address:t.address,apr:d(t.apr),apy:d(t.apy)})))||[]}var p=a(98477),v=a(75016),m=a(10700);async function P(){let{data:t}=await u.G.overview.pool.all({});return(null==t?void 0:t.map(t=>({id:(0,m.T)(t),chainKey:t.chainKey,address:t.address,apr:d(t.apr),apy:d(t.apy),tvlUsd:t.tvlUsd,inboundVolume1dUsd:t.inboundVolume1dUsd,inboundVolume7dUsd:t.inboundVolume7dUsd})))||[]}let g=[{chainKey:"optimism",symbol:"ETH",address:"0xd22363e3762cA7339569F3d33EADe20127D5F98C",supportedBy:"Metis"},{chainKey:"optimism",symbol:"USDC.e",address:"0xDecC0c09c3B5f6e92EF4184125D5648a66E35298",supportedBy:"Optimism"},{chainKey:"avalanche",symbol:"USDT",address:"0xEAe5c2F6B25933deB62f754f239111413A0A25ef",supportedBy:"Metis"},{chainKey:"bsc",symbol:"USDT",address:"0x68C6c27fB0e02285829e69240BE16f32C5f8bEFe",supportedBy:"Metis"},{chainKey:"metis",symbol:"USDT",address:"0x2b60473a7C41Deb80EDdaafD5560e963440eb632",supportedBy:"Metis"},{chainKey:"ethereum",symbol:"USDT",address:"0x430Ebff5E3E80A6C58E7e6ADA1d90F5c28AA116d",supportedBy:"Metis"},{chainKey:"optimism",symbol:"DAI",address:"0x165137624F1f692e69659f944BF69DE02874ee27",supportedBy:"Optimism"},{chainKey:"optimism",symbol:"FRAX",address:"0x368605D9C6243A80903b9e326f1Cddde088B8924",supportedBy:"Optimism"},{chainKey:"base",symbol:"USDC",address:"0x4c80E24119CFB836cdF0a6b53dc23F04F7e652CA"},{chainKey:"avalanche",symbol:"WOO",address:"0x45524dc9d05269E1101Ad7Cff1639AE2aA20989d"}];var h=a(15139);class y{get wallet(){return i.walletStore.evm}get pools(){return h.b.pools}get farms(){return v.K.farms}get myPools(){return this.allPools.filter(t=>{var e,a;return null===(a=t.poolPosition)||void 0===a?void 0:null===(e=a.lpTotal)||void 0===e?void 0:e.greaterThan(0)}).sort(Z).reverse()}get topPools(){return this.allPools.slice().sort((t,e)=>{var a,o;return a=t.poolData,o=e.poolData,((null==a?void 0:a.tvlUsd)?Number(a.tvlUsd):0)-((null==o?void 0:o.tvlUsd)?Number(o.tvlUsd):0)}).reverse()}get availablePools(){return this.allPools.filter(t=>{var e,a;return null===(a=t.poolPosition)||void 0===a?void 0:null===(e=a.available)||void 0===e?void 0:e.greaterThan(0)}).sort((t,e)=>{var a,o;return(0,s.m)(null===(a=t.poolPosition)||void 0===a?void 0:a.available,null===(o=e.poolPosition)||void 0===o?void 0:o.available)}).reverse()}get allPools(){return this.poolRows.filter(t=>!t.pool.disabled)}get poolRows(){var t;let e=null===(t=this.wallet)||void 0===t?void 0:t.address;return h.b.pools.map(t=>{var a;let o=e?this.getPoolPosition(t,e):void 0,r=this.getPoolData(t);return{poolMetaData:(a=t,g.find(t=>t.chainKey===a.chainKey&&t.address.toLowerCase()===a.address.toLowerCase())||{symbol:a.token.symbol,address:a.address,chainKey:a.chainKey}),pool:t,poolData:r,poolPosition:o}})}get myFarms(){return this.allFarms.filter(t=>{var e,a;return null===(a=t.farmPosition)||void 0===a?void 0:null===(e=a.depositedAmount)||void 0===e?void 0:e.greaterThan(0)}).sort((t,e)=>{var a,o;return(0,s.m)(null===(a=t.farmPosition)||void 0===a?void 0:a.depositedAmount,null===(o=e.farmPosition)||void 0===o?void 0:o.depositedAmount)}).reverse()}get topFarms(){return this.allFarms.slice().sort((t,e)=>{var a,r;return function(t,e){let a=null!=t?t:new o.gG(0n,1),r=null!=e?e:new o.gG(0n,1);return Number(a.subtract(r).toSignificant(4))}(null===(a=t.farmData)||void 0===a?void 0:a.apr,null===(r=e.farmData)||void 0===r?void 0:r.apr)}).reverse()}get availableFarms(){return this.allFarms.filter(t=>{var e,a;return null===(a=t.poolPosition)||void 0===a?void 0:null===(e=a.lpAvailable)||void 0===e?void 0:e.greaterThan(0)}).sort((t,e)=>{var a,o;return(0,s.m)(null===(a=t.poolPosition)||void 0===a?void 0:a.lpAvailable,null===(o=e.poolPosition)||void 0===o?void 0:o.lpAvailable)}).reverse()}get allFarms(){return this.farmRows.filter(t=>!t.farm.disabled).sort(t=>"v2"===t.farm.stargateVersion?1:0)}get farmRows(){var t;let{allPools:e}=this,a=null===(t=this.wallet)||void 0===t?void 0:t.address;return this.farms.map(t=>{let o=this.getFarmData(t),r=a?this.getFarmPosition(t,a):void 0;return{...e.find(e=>e.pool.lpToken.equals(t.lpToken)),farm:t,farmData:o,farmPosition:r}})}async updatePoolData(){let t=await P();(0,r.z)(()=>{this.poolData.length=0,this.poolData.push(...t)})}async updateFarmData(){let t=await c();(0,r.z)(()=>{this.farmData.length=0,this.farmData.push(...t)})}async updatePoolTotalSupply(t){let e=this.getPoolAdapter(t),a=t.lpToken.id,o=await e.getTotalSupply();return(0,r.z)(()=>{this.poolTotalSupply.set(a,o)}),o}async updatePoolBalance(t,e){return n._.updateBalance(t.lpToken,e)}async updateFarmPosition(t,e){let a=this.getFarmAdapter(t),o=f(t,e),[n,i]=await Promise.all([a.getDepositedAmount({user:e}),a.getPendingRewards({user:e})]),s={depositedAmount:n.amount,rewards:i.rewards.toSorted((t,e)=>{let a=w(t),o=w(e);return a===o?0:a<o?1:-1}),farm:t,user:e};return(0,r.z)(()=>{this.farmPositions.set(o,s)}),s}getTotalSupply(t){return this.poolTotalSupply.get(t.id)}getFarmData(t){return this.farmData.find(e=>e.id===(0,p._)(t))}getFarmPosition(t,e){return this.farmPositions.get(f(t,e))}getFarmingBalance(t,e){let a=0n;for(let o of this.farms){if(!o.lpToken.equals(t))continue;let r=this.getFarmPosition(o,e);if(!r)return;a+=r.depositedAmount.toBigInt()}return o.ih.fromBigInt(t,a)}getPoolData(t){return this.poolData.find(e=>e.id===(0,m.T)(t))}getPoolPosition(t,e){if(!e)return;let a=n._.getBalance(t.token,e),r=n._.getBalance(t.lpToken,e),i=this.getFarmingBalance(t.lpToken,e),s=i?null==r?void 0:r.add(i):void 0,l=this.getTotalSupply(t.lpToken),d=s&&(null==l?void 0:l.greaterThan(0))?new o.gG(s.toBigInt(),l.toBigInt()):void 0;return{available:a,lpAvailable:r,lpTotal:s,lpLocked:i,poolShare:d}}getPoolAdapter(t){return h.b.getAdapter(t)}getFarmAdapter(t){return v.K.getAdapter(t)}subscribe(){let t=()=>{var t;if(null===(t=this.wallet)||void 0===t?void 0:t.address)for(let t of this.farms)this.updateFarmPosition(t,this.wallet.address)},e=()=>{for(let t of this.pools)this.updatePoolTotalSupply(t)},a=()=>{var t;if(null===(t=this.wallet)||void 0===t?void 0:t.address)for(let t of this.pools)this.updatePoolBalance(t,this.wallet.address)},o=()=>{this.updatePoolData()},n=()=>{this.updateFarmData()},i=[(0,r.EH)(()=>o()),(0,r.EH)(()=>a()),(0,r.EH)(()=>t()),(0,r.EH)(()=>e()),(0,r.EH)(()=>n())];return()=>{i.forEach(t=>t())}}constructor(){this.farmData=r.LO.array([],{deep:!1}),this.poolData=r.LO.array([],{deep:!1}),this.poolTotalSupply=r.LO.map({},{deep:!1}),this.farmPositions=r.LO.map({},{deep:!1}),(0,r.ky)(this,{availablePools:r.Fl.struct,availableFarms:r.Fl.struct,topPools:r.Fl.struct,topFarms:r.Fl.struct,allPools:r.Fl.struct,allFarms:r.Fl.struct,myFarms:r.Fl.struct,myPools:r.Fl.struct,wallet:r.Fl,poolRows:r.Fl.struct,farmRows:r.Fl.struct},{autoBind:!0})}}function f(t,e){return"".concat((0,p._)(t),":").concat(e)}let b=new y;function Z(t,e){let{poolPosition:a,pool:r}=t,{poolPosition:n,pool:i}=e,l=(null==a?void 0:a.lpTotal)&&(0,o.ph)(a.lpTotal,r.token),d=(null==n?void 0:n.lpTotal)&&(0,o.ph)(n.lpTotal,i.token);return(0,s.m)(l,d)}function w(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return t.toBigInt()*BigInt(10**e)/BigInt(10**t.token.decimals)}},98477:function(t,e,a){a.d(e,{_:function(){return o}});function o(t){if("address"in t.lpToken)return"".concat(t.chainKey,":").concat(t.address.toLowerCase(),":").concat(t.lpToken.address.toLowerCase());throw Error("Unsupported farm: ".concat(t.chainKey,":").concat(t.address))}},75016:function(t,e,a){a.d(e,{K:function(){return s}});var o=a(59533),r=a(94522),n=a(98477);class i{getAdapter(t){for(let e of this.adapters)if(e.supports(t))return e;throw Error("Adapter not found for farm ".concat((0,n._)(t)))}constructor(){this.adapters=r.aL,this.farms=r.p3,this.unsubscribe=void 0,(0,o.ky)(this,{},{})}}let s=new i},77248:function(t,e,a){a.d(e,{G:function(){return B}});var o=a(8590),r=a(65720),n=a(41270),i=a(23974);let s=n.ZP.string().nonempty(),l=t=>/^[+-]?\d+(\.\d+)?$/.test(t),d=n.ZP.string().refine(t=>l(t)||"Infinity"===t,{message:"Is not a numeric string"}),u=r.Z.create({baseURL:"".concat(i.O.NEXT_PUBLIC_STARGATE_API_URL,"/v1")}),c=n.ZP.object({sort:n.ZP.string()}),p=n.ZP.object({data:n.ZP.object({tvlUsd:n.ZP.record(s,d),totalVolumeUsd:n.ZP.record(s,d),totalTransactionCount:n.ZP.record(s,d)})}),v=n.ZP.object({data:n.ZP.object({tvlUsd:d,tvlUsd24h:d,totalVolumeUsd24h:d,totalVolumeUsd48h:d,totalTransactionCount24h:d,totalTransactionCount48h:d})}),m=n.ZP.object({data:n.ZP.array(n.ZP.object({stargateVersion:n.ZP.string(),id:n.ZP.string(),chainKey:n.ZP.string(),address:n.ZP.string(),tvlUsd:d,inboundVolume1dUsd:d,inboundVolume7dUsd:d,apr:d.nullish(),apy:d.nullish()}))}),P=n.ZP.object({sort:n.ZP.string(),chainKey:n.ZP.string(),address:n.ZP.string()}),g=n.ZP.object({data:n.ZP.object({tvlUsd:n.ZP.record(s,d),inboundVolumeUsd:n.ZP.record(s,d),inboundTransactionCount:n.ZP.record(s,d)})}),h=n.ZP.object({chainKey:n.ZP.string(),address:n.ZP.string()}),y=n.ZP.object({data:n.ZP.object({tvlUsd:d,tvlUsd24h:d,inboundVolumeUsd24h:d,inboundVolumeUsd48h:d,inboundTransactionCount24h:d,inboundTransactionCount48h:d})}),f=n.ZP.object({srcSymbol:n.ZP.string().optional(),srcPool:n.ZP.string().optional(),srcChainKey:n.ZP.string().optional(),dstSymbol:n.ZP.string().optional(),dstPool:n.ZP.string().optional(),dstChainKey:n.ZP.string().optional(),after:n.ZP.string().datetime().optional(),size:n.ZP.number().optional()}),b=n.ZP.object({data:n.ZP.array(n.ZP.object({srcChainKey:n.ZP.string(),dstChainKey:n.ZP.string(),srcToken:n.ZP.string(),srcSymbol:n.ZP.string(),dstToken:n.ZP.string(),dstSymbol:n.ZP.string(),srcPool:n.ZP.string(),dstPool:n.ZP.string(),srcAmount:n.ZP.string(),usdValue:n.ZP.string(),srcAddress:n.ZP.string(),srcTxHash:n.ZP.string(),srcTxTimestamp:n.ZP.number(),mode:n.ZP.string()}))}),Z=n.ZP.object({srcAddress:n.ZP.string(),start:n.ZP.string().datetime(),end:n.ZP.string().datetime(),srcChainKey:n.ZP.array(n.ZP.string()).optional(),dstChainKey:n.ZP.array(n.ZP.string()).optional(),srcPool:n.ZP.array(n.ZP.string()).optional(),dstPool:n.ZP.array(n.ZP.string()).optional(),srcToken:n.ZP.array(n.ZP.string()).optional(),dstToken:n.ZP.array(n.ZP.string()).optional(),after:n.ZP.string().datetime().optional(),size:n.ZP.number().optional()}),w=n.ZP.object({data:n.ZP.object({usd:d,count:d})}),T=n.ZP.object({data:n.ZP.array(n.ZP.object({id:n.ZP.string(),chainKey:n.ZP.string(),address:n.ZP.string(),apr:d.nullish(),apy:d.nullish()}))});function F(){return{input:t=>({output:t=>({query:e=>async a=>{let o=await e({input:a});return t.parse(o)}})})}}let A=n.ZP.object({price:n.ZP.record(n.ZP.string(),n.ZP.number().nullable()),address:n.ZP.string().optional(),decimals:n.ZP.number(),chainKey:n.ZP.string(),name:n.ZP.string().optional(),icon:n.ZP.string().optional(),symbol:n.ZP.string()}),B={tokens:F().input(n.ZP.object({})).output(A.array()).query(async()=>(await r.Z.get("/api/tokens")).data),overview:{aggregated:{historical:F().input(c).output(p).query(async t=>{let{input:e}=t;return(await u.get("/overview/aggregated/historical",{params:e})).data}),live:F().input(n.ZP.object({})).output(v).query(async()=>(await u.get("/overview/aggregated/live")).data)},pool:{all:F().input(n.ZP.object({})).output(m).query(async t=>{let{input:e}=t;return(await u.get("/overview/pools",{params:e})).data}),historical:F().input(P).output(g).query(async t=>{var e;let{input:{chainKey:a,address:o,sort:r}}=t;return null===(e=await u.get("/overview/pool/".concat(a,"/").concat(o,"/historical"),{params:{sort:r}}))||void 0===e?void 0:e.data}),live:F().input(h).output(y).query(async t=>{var e;let{input:{chainKey:a,address:o}}=t;return null===(e=await u.get("/overview/pool/".concat(a,"/").concat(o,"/live")))||void 0===e?void 0:e.data})},transfers:{all:F().input(f).output(b).query(async t=>{var e;let{input:a}=t;return null===(e=await u.get("/overview/transfers",{params:a}))||void 0===e?void 0:e.data}),volume:F().input(Z).output(w).query(async t=>{var e;let{input:a}=t;return null===(e=await u.get("/overview/transfers/volume",{params:a}))||void 0===e?void 0:e.data})},farm:{all:F().input(n.ZP.object({})).output(T).query(async t=>{var e;let{input:a}=t;return null===(e=await u.get("/overview/farms",{params:a}))||void 0===e?void 0:e.data})},stake:F().input(n.ZP.object({})).output(n.ZP.object({totalStgLocked:o.k1,totalVeStgSupply:o.k1,totalStgLockedRatio:n.ZP.string().transform(t=>{let e=(0,o.vz)(t,18);return new o.gG(e,1e18)}),globalAverageLockTime:n.ZP.number().positive()})).query(async()=>{let{data:t}=await r.Z.get("/api/stake/overview");return t})}}},10700:function(t,e,a){a.d(e,{T:function(){return o}});function o(t){return"".concat(t.chainKey,":").concat(t.address)}},15139:function(t,e,a){a.d(e,{b:function(){return s}});var o=a(94522),r=a(10700),n=a(59533);class i{getAdapter(t){let e=this.adapters.find(e=>e.supportsPool(t));if(e)return e;throw Error("Adapter not found for pool ".concat((0,r.T)(t)))}constructor(){this.adapters=o.S1,this.pools=o.Gm,(0,n.ky)(this,{},{autoBind:!0})}}let s=new i}}]);